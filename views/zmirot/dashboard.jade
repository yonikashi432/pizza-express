doctype html
html(lang='he')
  head
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    title= title + ' - 砖专'
    style.
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { 
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #1a3a52 0%, #2d5a7b 100%);
        color: #f0f0f0;
        min-height: 100vh;
        direction: rtl;
        padding: 20px;
      }
      
      .container { max-width: 1200px; margin: 0 auto; }
      
      header {
        text-align: center;
        margin-bottom: 30px;
        padding: 20px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 10px;
      }
      
      .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }
      
      .stat-card {
        background: rgba(0, 0, 0, 0.4);
        padding: 25px;
        border-radius: 8px;
        border-top: 4px solid #ffd700;
        text-align: center;
      }
      
      .stat-label {
        color: #aaa;
        font-size: 0.9em;
        margin-bottom: 10px;
      }
      
      .stat-value {
        font-size: 2.5em;
        color: #ffd700;
        font-weight: bold;
      }
      
      .section {
        background: rgba(0, 0, 0, 0.4);
        padding: 25px;
        border-radius: 8px;
        border-left: 4px solid #ffd700;
        margin-bottom: 20px;
      }
      
      .section h2 {
        color: #ffd700;
        margin-bottom: 20px;
        font-size: 1.5em;
      }
      
      .role-list, .top-piyutim {
        list-style: none;
      }
      
      .role-item, .piyut-item {
        padding: 15px;
        background: rgba(0, 0, 0, 0.3);
        margin-bottom: 10px;
        border-radius: 5px;
        display: flex;
        justify-content: space-between;
      }
      
      .role-name, .piyut-name {
        color: #ffd700;
      }
      
      .role-count, .piyut-score {
        color: #aaa;
      }
      
      .status-badge {
        display: inline-block;
        padding: 5px 10px;
        border-radius: 3px;
        font-size: 0.8em;
        margin-bottom: 10px;
      }
      
      .pending-badge {
        background: rgba(255, 215, 0, 0.2);
        color: #ffd700;
      }

  body
    .container
      header
        h1  砖专 注专转
        p 拽转 转 拽砖 -  专转 拽砖转

      if user && (user.role === '' || user.id === 'jonathan-kashi')
        .dashboard-grid
          .stat-card
            .stat-label 砖转砖
            .stat-value= stats.totalUsers || 0
          
          .stat-card
            .stat-label 专转
            .stat-value= stats.totalPiyutim || 0
          
          .stat-card
            .stat-label 爪注转 转转
            .stat-value= stats.pendingVotes || 0
          
          .stat-card
            .stat-label 转转
            .stat-value= stats.totalSupports || 0
        
        .section
          h2 转驻转 砖转砖 驻 专
          ul.role-list
            if stats.usersByRole
              - roles = {'转': '转', '': '注抓', '': '专', '': '', '': ''}
              each count, role in stats.usersByRole
                li.role-item
                  span.role-name= roles[role] + ' (' + role + ')'
                  span.role-count= count + ' 砖转砖'
        
        .section
          h2 专转 转
          if stats.topPiyutim && stats.topPiyutim.length > 0
            ul.top-piyutim
              each piyut in stats.topPiyutim
                li.piyut-item
                  span.piyut-name= piyut.title
                  span.piyut-score
                    = piyut.score
                    | 拽 (
                    = piyut.supporters.length
                    | 转)
          else
            p  专转 注
      else
        .section
          p 专拽  注专转  爪驻转 砖专 
